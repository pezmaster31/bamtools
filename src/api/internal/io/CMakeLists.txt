# ==========================
# BamTools CMakeLists.txt
# (c) 2011 Derek Barnett
#
# src/api/internal/io
# ==========================

set ( InternalIODir "${InternalDir}/io" )

add_subdirectory( pbgzf )

#--------------------------
# platform-independent IO
#--------------------------
set ( CommonIOSources
        ${InternalIODir}/BamDeviceFactory_p.cpp
        ${InternalIODir}/BamFile_p.cpp
        ${InternalIODir}/BamFtp_p.cpp
        ${InternalIODir}/BamHttp_p.cpp
        ${InternalIODir}/BamPipe_p.cpp
        ${InternalIODir}/BgzfStream_p.cpp
        ${InternalIODir}/ByteArray_p.cpp
        ${InternalIODir}/HostAddress_p.cpp
        ${InternalIODir}/HostInfo_p.cpp
        ${InternalIODir}/HttpHeader_p.cpp
        ${InternalIODir}/ILocalIODevice_p.cpp
		${InternalIODir}/ParallelBgzfStream_p.cpp
        ${InternalIODir}/RollingBuffer_p.cpp
		${InternalIODir}/SerialBgzfStream_p.cpp
        ${InternalIODir}/TcpSocket_p.cpp
        ${InternalIODir}/TcpSocketEngine_p.cpp
)

#------------------------
# platform-dependent IO
#------------------------
if ( _WIN32 )
    set ( PlatformIOSources
            ${InternalIODir}/TcpSocketEngine_win_p.cpp
    )
else ( _WIN32 )
    set ( PlatformIOSources
            ${InternalIODir}/TcpSocketEngine_unix_p.cpp
    )
endif ( _WIN32 )

#---------------------------
# make build-specific list
#---------------------------
set ( InternalIOSources 
        ${CommonIOSources} 
        ${PlatformIOSources} 
		${InternalPBGZFSources}

        PARENT_SCOPE # <-- leave this last
)

